/*************************************************************************
 *
 *	Name:		huffman.h
 *	Description:	Huffman table for Huffman-coding/decoding
 *			(included by huffman.c only)
 *	Date: 96/04/16	Author: Chu Ching-Wen in N.T.H.U., Taiwan
 *
 *************************************************************************/

#ifndef HUFFMAN_DONE
#define HUFFMAN_DONE

#include "globals.h"	/* include some definitions from H.261 */

/*************************************************************************
 * Each of following arrays consists of trios of Huffman-table definitions:
 *	1st : the value (pattern)
 *	2nd : the length of the code (in bits)
 *	3rd : the VLC code (Variable Length Code)
 *
 *  =>	...Table->Hlen[1st] = 2nd
 *	...Table->Hcode[1st] = 3rd
 *************************************************************************/

#define EOT -1	/* End Of Table */

/*************************************************************************/
/* MacroBlock Address table (TABLE 1/H.261)
 * Variable length codes (VLC) for macroblock addressing (MBA)
 */
int16 MBAtable[] = {
	1,      1,      1,      /* 1 */
	2,      3,      3,      /* 011 */
	3,      3,      2,      /* 010 */
	4,      4,      3,      /* 0011 */
	5,      4,      2,      /* 0010 */
	6,      5,      3,      /* 0001 1 */
	7,      5,      2,      /* 0001 0 */
	8,      7,      7,      /* 0000 111 */
	9,      7,      6,      /* 0000 110 */
	10,     8,      11,     /* 0000 1011 */
	11,     8,      10,     /* 0000 1010 */
	12,     8,      9,      /* 0000 1001 */
	13,     8,      8,      /* 0000 1000 */
	14,     8,      7,      /* 0000 0111 */
	15,     8,      6,      /* 0000 0110 */
	16,     10,     23,     /* 0000 0101 11 */
	17,     10,     22,     /* 0000 0101 10 */
	18,     10,     21,     /* 0000 0101 01 */
	19,     10,     20,     /* 0000 0101 00 */
	20,     10,     19,     /* 0000 0100 11 */
	21,     10,     18,     /* 0000 0100 10 */
	22,     11,     35,     /* 0000 0100 011 */
	23,     11,     34,     /* 0000 0100 010 */
	24,     11,     33,     /* 0000 0100 001 */
	25,     11,     32,     /* 0000 0100 000 */
	26,     11,     31,     /* 0000 0011 111 */
	27,     11,     30,     /* 0000 0011 110 */
	28,     11,     29,     /* 0000 0011 101 */
	29,     11,     28,     /* 0000 0011 100 */
	30,     11,     27,     /* 0000 0011 011 */
	31,     11,     26,     /* 0000 0011 010 */
	32,     11,     25,     /* 0000 0011 001 */
	33,     11,     24,     /* 0000 0011 000 */
MBAstuffing,	11,     15,     /* 0000 0001 111 (MBA stuffing) */
 GBSC_code,	16,     1,      /* 0000 0000 0000 0001 (Start code) */
	EOT
};

/*************************************************************************/
/* Macroblock TYPE table (TABLE 2/H.261)
 * Variable length codes (VLC) for MTYPE
 */
int16 MTYPEtable[] = {
	0,      4,      1,      /* 0001 */
	1,      7,      1,      /* 0000 001 */
	2,      1,      1,      /* 1 */
	3,      5,      1,      /* 0000 1 */
	4,      9,      1,      /* 0000 0000 1 */
	5,      8,      1,      /* 0000 0001 */
	6,      10,     1,      /* 0000 0000 01 */
	7,      3,      1,      /* 001 */
	8,      2,      1,      /* 01 */
	9,      6,      1,      /* 0000 01 */
	EOT
};

/*************************************************************************/
/* Motion Vector Data table (TABLE 3/H.261)
 * Variable length codes (VLC) for MVD
 */
int16 MVDtable[] = {
/*-16*/	16, 	11,     25,     /* 0000 0011 001 */
/*-15*/	17,     11,     27,     /* 0000 0011 011 */
/*-14*/	18,     11,     29,     /* 0000 0011 101 */
/*-13*/	19,     11,     31,     /* 0000 0011 111 */
/*-12*/	20,     11,     33,     /* 0000 0100 001 */
/*-11*/	21,     11,     35,     /* 0000 0100 011 */
/*-10*/	22,     10,     19,     /* 0000 0100 11 */
/* -9*/	23,     10,     21,     /* 0000 0101 01 */
/* -8*/	24,     10,     23,     /* 0000 0100 11 */
/* -7*/	25,     8,      7,      /* 0000 0111 */
/* -6*/	26,     8,      9,      /* 0000 1001 */
/* -5*/	27,     8,      11,     /* 0000 1011 */
/* -4*/	28,     7,      7,      /* 0000 111 */
/* -3*/	29,     5,      3,      /* 0001 1 */
/* -2*/	30,     4,      3,      /* 0011 */
/* -1*/	31,     3,      3,      /* 011 */
	0,      1,      1,      /* 1 */
	1,      3,      2,      /* 010 */
	2,      4,      2,      /* 0010 */
	3,      5,      2,      /* 0001 0 */
	4,      7,      6,      /* 0000 110 */
	5,      8,      10,     /* 0000 1010 */
	6,      8,      8,      /* 0000 1000 */
	7,      8,      6,      /* 0000 0110 */
	8,      10,     22,     /* 0000 0101 10 */
	9,      10,     20,     /* 0000 0101 00 */
	10,     10,     18,     /* 0000 0100 10 */
	11,     11,     34,     /* 0000 0100 010 */
	12,     11,     32,     /* 0000 0100 000 */
	13,     11,     30,     /* 0000 0011 110 */
	14,     11,     28,     /* 0000 0011 100 */
	15,     11,     26,     /* 0000 0011 010 */
	EOT
};

/*************************************************************************/
/* Coded Block Pattern (CBP) table (TABLE 4/H.261)
 * Variable length codes (VLC) for CBP
 */
int16 CBPtable[] = {
/* 60 = 111100 => Y1,Y2,Y3,Y4 enable but U, V disable => 4 Y blocks trans. */

  /* 4 Y or 1 Y */
	60,     3,      7,      /* 111 */
	4,      4,      13,     /* 1101 */
	8,      4,      12,     /* 1100 */
	16,     4,      11,     /* 1011 */
	32,     4,      10,     /* 1010 */
  /* 2 neighbour Y */
	12,     5,      19,     /* 1001 1 */
	48,     5,      18,     /* 1001 0 */
	20,     5,      17,     /* 1000 1 */
	40,     5,      16,     /* 1000 0 */
  /* 3 neighbour Y */
	28,     5,      15,     /* 0111 1 */
	44,     5,      14,     /* 0111 0 */
	52,     5,      13,     /* 0110 1 */
	56,     5,      12,     /* 0110 0 */
  /* ... */
	1,      5,      11,     /* 0101 1 */
	61,     5,      10,     /* 0101 0 */
	2,      5,      9,      /* 0100 1 */
	62,     5,      8,      /* 0100 0 */

	24,     6,      15,     /* 0011 11 */
	36,     6,      14,     /* 0011 10 */
	3,      6,      13,     /* 0011 01 */
	63,     6,      12,     /* 0011 00 */

	5,      7,      23,     /* 0010 111 */
	9,      7,      22,     /* 0010 110 */
	17,     7,      21,     /* 0010 101 */
	33,     7,      20,     /* 0010 100 */

	6,      7,      19,     /* 0010 011 */
	10,     7,      18,     /* 0010 010 */
	18,     7,      17,     /* 0010 001 */
	34,     7,      16,     /* 0010 000 */

	11,     8,      30,     /* 0001 1111 */
	7,      8,      31,     /* 0001 1110 */
	19,     8,      29,     /* 0001 1101 */
	35,     8,      28,     /* 0001 1100 */

	13,     8,      27,     /* 0001 1011 */
	49,     8,      26,     /* 0001 1010 */
	21,     8,      25,     /* 0001 1001 */
	41,     8,      24,     /* 0001 1000 */

	14,     8,      23,     /* 0001 0111 */
	50,     8,      22,     /* 0001 0110 */
	22,     8,      21,     /* 0001 0101 */
	42,     8,      20,     /* 0001 0100 */

	15,     8,      19,     /* 0001 0011 */
	51,     8,      18,     /* 0001 0010 */
	23,     8,      17,     /* 0001 0001 */
	43,     8,      16,     /* 0001 0000 */

	25,     8,      15,     /* 0000 1111 */
	37,     8,      14,     /* 0000 1110 */
	26,     8,      13,     /* 0000 1101 */
	38,     8,      12,     /* 0000 1100 */

	29,     8,      11,     /* 0000 1011 */
	45,     8,      10,     /* 0000 1010 */
	53,     8,      9,      /* 0000 1001 */
	57,     8,      8,      /* 0000 1000 */
	30,     8,      7,      /* 0000 0111 */
	46,     8,      6,      /* 0000 0110 */
	54,     8,      5,      /* 0000 0101 */
	58,     8,      4,      /* 0000 0100 */
	31,     9,      7,      /* 0000 0011 1 */
	47,     9,      6,      /* 0000 0011 0 */
	55,     9,      5,      /* 0000 0010 1 */
	59,     9,      4,      /* 0000 0010 0 */
	27,     9,      3,      /* 0000 0001 1 */
	39,     9,      2,      /* 0000 0001 0 */
	EOT
};

/*************************************************************************/
/* Transform Coefficient table for not_1st_coeff (from TABLE 5/H.261)
 * Variable length codes (VLC) for TCOEFF (except the 1st coeff).
 * because CBP indicates those blocks with no coeff. data, EOB can't occur
 * as the 1st coeff. Hence EOB can be removed from VLC table.
 *	TCOEFF1 includes EOB <=> for 1st coeff.
 *	TCOEFF2 excludes EOB <=> for other coeff.
 */
int16 TCOEFFtable1[] = {
	/* run == 0 */
	EOB,	2,      2,      /* 10 */                /* EOB */
	1,      2,      3,      /* 11 */  		/* Not first coef */

  /* The same part of TCoeff1[] and TCoeff2[]... */

	2,      4,      4,      /* 0100 */
	3,      5,      5,      /* 0010 1 */
	4,      7,      6,      /* 0000 110 */
	5,      8,      38,     /* 0010 0110 */
	6,      8,      33,     /* 0010 0001 */
	7,      10,     10,     /* 0000 0010 10 */
	8,      12,     29,     /* 0000 0001 1101 */
	9,      12,     24,     /* 0000 0001 1000 */
	10,     12,     19,     /* 0000 0001 0011 */
	11,     12,     16,     /* 0000 0001 0000 */
	12,     13,     26,     /* 0000 0000 1101 0 */
	13,     13,     25,     /* 0000 0000 1100 1 */
	14,     13,     24,     /* 0000 0000 1100 0 */
	15,     13,     23,     /* 0000 0000 1011 1 */

	/* run == 1 */
	257,    3,      3,      /* 011 */
	258,    6,      6,      /* 0001 10 */
	259,    8,      37,     /* 0010 0101 */
	260,    10,     12,     /* 0000 0011 00 */
	261,    12,     27,     /* 0000 0001 1011 */
	262,    13,     22,     /* 0000 0000 1011 0 */
	263,    13,     21,     /* 0000 0000 1010 1 */

	/* run == 2 */
	513,    4,      5,      /* 0101 */
	514,    7,      4,      /* 0000 100 */
	515,    10,     11,     /* 0000 0010 11 */
	516,    12,     20,     /* 0000 0001 0100 */
	517,    13,     20,     /* 0000 0000 1010 0 */

	/* run == 3 */
	769,    5,      7,      /* 0011 1 */
	770,    8,      36,     /* 0010 0100 */
	771,    12,     28,     /* 0000 0001 1100 */
	772,    13,     19,     /* 0000 0000 1001 1 */

	/* run == 4 */
	1025,   5,      6,      /* 0011 0 */
	1026,   10,     15,     /* 0000 0011 11 */
	1027,   12,     18,     /* 0000 0001 0010 */

	/* run == 5 */
	1281,   6,      7,      /* 0001 11 */
	1282,   10,     9,      /* 0000 0010 01 */
	1283,   13,     18,     /* 0000 0000 1001 0 */

	/* run == 6 */
	1537,   6,      5,      /* 0001 01 */
	1538,   12,     30,     /* 0000 0001 1110 */

	/* run == 7 */
	1793,   6,      4,      /* 0001 00 */
	1794,   12,     21,     /* 0000 0001 0101 */

	/* run == 8 */
	2049,   7,      7,      /* 0000 111 */
	2050,   12,     17,     /* 0000 0001 0001 */

	/* run == 9 */
	2305,   7,      5,      /* 0000 101 */
	2306,   13,     17,     /* 0000 0000 1000 1 */

	/* run == 10 */
	2561,   8,      39,     /* 0010 0111 */
	2562,   13,     16,     /* 0000 0000 1000 0 */

	/* run == 11 */
	2817,   8,      35,     /* 0010 0011 */

	/* run == 12 */
	3073,   8,      34,     /* 0010 0010 */

	/* run == 13 */
	3329,   8,      32,     /* 0010 0000 */

	/* run == 14 */
	3585,   10,     14,     /* 0000 0011 10 */

	/* run == 15 */
	3841,   10,     13,     /* 0000 0011 01 */

	/* run == 16 */
	4097,   10,     8,      /* 0000 0010 00 */

	/* run == 17 */
	4353,   12,     31,     /* 0000 0001 1111 */

	/* run == 18 */
	4609,   12,     26,     /* 0000 0001 1010 */

	/* run == 19 */
	4865,   12,     25,     /* 0000 0001 1001 */

	/* run == 20 */
	5121,   12,     23,     /* 0000 0001 0111 */

	/* run == 21 */
	5377,   12,     22,     /* 0000 0001 0110 */

	/* run == 22 */
	5633,   13,     31,     /* 0000 0000 1111 1 */

	/* run == 23 */
	5889,   13,     30,     /* 0000 0000 1111 0 */

	/* run == 24 */
	6145,   13,     29,     /* 0000 0000 1110 1 */

	/* run == 25 */
	6401,   13,     28,     /* 0000 0000 1110 0 */

	/* run == 26 */
	6657,   13,     27,     /* 0000 0000 1101 1 */

	/* Escape */
	6913,   6,      1,      /* 0000 01 */

	EOT
};

/*************************************************************************/
/* Transform COEFFicient table for 1st_coeff (from TABLE 5/H.261)
 * Variable length codes (VLC) for TCOEFF (the 1st coeff).
 * because CBP indicates those blocks with no coeff. data, EOB can't occur
 * as the 1st coeff. Hence EOB can be removed from VLC table.
 *	TCOEFF1 includes EOB <=> for 1st coeff.
 *	TCOEFF2 excludes EOB <=> for other coeff.
 */
int16 TCOEFFtable2[] = {
	1,      1,      1,      /* 1 */                 /* First coef. */

  /* The same part of TCoeff1[] and TCoeff2[]... */

	2,      4,      4,      /* 0100 */
	3,      5,      5,      /* 0010 1 */
	4,      7,      6,      /* 0000 110 */
	5,      8,      38,     /* 0010 0110 */
	6,      8,      33,     /* 0010 0001 */
	7,      10,     10,     /* 0000 0010 10 */
	8,      12,     29,     /* 0000 0001 1101 */
	9,      12,     24,     /* 0000 0001 1000 */
	10,     12,     19,     /* 0000 0001 0011 */
	11,     12,     16,     /* 0000 0001 0000 */
	12,     13,     26,     /* 0000 0000 1101 0 */
	13,     13,     25,     /* 0000 0000 1100 1 */
	14,     13,     24,     /* 0000 0000 1100 0 */
	15,     13,     23,     /* 0000 0000 1011 1 */

	/* run == 1 */
	257,    3,      3,      /* 011 */
	258,    6,      6,      /* 0001 10 */
	259,    8,      37,     /* 0010 0101 */
	260,    10,     12,     /* 0000 0011 00 */
	261,    12,     27,     /* 0000 0001 1011 */
	262,    13,     22,     /* 0000 0000 1011 0 */
	263,    13,     21,     /* 0000 0000 1010 1 */

	/* run == 2 */
	513,    4,      5,      /* 0101 */
	514,    7,      4,      /* 0000 100 */
	515,    10,     11,     /* 0000 0010 11 */
	516,    12,     20,     /* 0000 0001 0100 */
	517,    13,     20,     /* 0000 0000 1010 0 */

	/* run == 3 */
	769,    5,      7,      /* 0011 1 */
	770,    8,      36,     /* 0010 0100 */
	771,    12,     28,     /* 0000 0001 1100 */
	772,    13,     19,     /* 0000 0000 1001 1 */

	/* run == 4 */
	1025,   5,      6,      /* 0011 0 */
	1026,   10,     15,     /* 0000 0011 11 */
	1027,   12,     18,     /* 0000 0001 0010 */

	/* run == 5 */
	1281,   6,      7,      /* 0001 11 */
	1282,   10,     9,      /* 0000 0010 01 */
	1283,   13,     18,     /* 0000 0000 1001 0 */

	/* run == 6 */
	1537,   6,      5,      /* 0001 01 */
	1538,   12,     30,     /* 0000 0001 1110 */

	/* run == 7 */
	1793,   6,      4,      /* 0001 00 */
	1794,   12,     21,     /* 0000 0001 0101 */

	/* run == 8 */
	2049,   7,      7,      /* 0000 111 */
	2050,   12,     17,     /* 0000 0001 0001 */

	/* run == 9 */
	2305,   7,      5,      /* 0000 101 */
	2306,   13,     17,     /* 0000 0000 1000 1 */

	/* run == 10 */
	2561,   8,      39,     /* 0010 0111 */
	2562,   13,     16,     /* 0000 0000 1000 0 */

	/* run == 11 */
	2817,   8,      35,     /* 0010 0011 */

	/* run == 12 */
	3073,   8,      34,     /* 0010 0010 */

	/* run == 13 */
	3329,   8,      32,     /* 0010 0000 */

	/* run == 14 */
	3585,   10,     14,     /* 0000 0011 10 */

	/* run == 15 */
	3841,   10,     13,     /* 0000 0011 01 */

	/* run == 16 */
	4097,   10,     8,      /* 0000 0010 00 */

	/* run == 17 */
	4353,   12,     31,     /* 0000 0001 1111 */

	/* run == 18 */
	4609,   12,     26,     /* 0000 0001 1010 */

	/* run == 19 */
	4865,   12,     25,     /* 0000 0001 1001 */

	/* run == 20 */
	5121,   12,     23,     /* 0000 0001 0111 */

	/* run == 21 */
	5377,   12,     22,     /* 0000 0001 0110 */

	/* run == 22 */
	5633,   13,     31,     /* 0000 0000 1111 1 */

	/* run == 23 */
	5889,   13,     30,     /* 0000 0000 1111 0 */

	/* run == 24 */
	6145,   13,     29,     /* 0000 0000 1110 1 */

	/* run == 25 */
	6401,   13,     28,     /* 0000 0000 1110 0 */

	/* run == 26 */
	6657,   13,     27,     /* 0000 0000 1101 1 */

	/* Escape */
	6913,   6,      1,      /* 0000 01 */

	EOT
};

#endif